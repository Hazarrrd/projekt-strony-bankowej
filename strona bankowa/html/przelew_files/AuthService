/**
 * @license RequireJS text 2.0.0 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */
define("text",["module"],function(n){"use strict";var f=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,r=typeof location!="undefined"&&location.href,h=r&&location.protocol&&location.protocol.replace(/\:/,""),c=r&&location.hostname,l=r&&(location.port||undefined),u=[],i=n.config(),t,e;return t={version:"2.0.0",strip:function(n){if(n){n=n.replace(o,"");var t=n.match(s);t&&(n=t[1])}else n="";return n},jsEscape:function(n){return n.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var t,n,i;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(n=0;n<3;n++){i=f[n];try{t=new ActiveXObject(i)}catch(r){}if(t){f=[i];break}}return t},parseName:function(n){var r=!1,t=n.indexOf("."),u=n.substring(0,t),i=n.substring(t+1,n.length);return t=i.indexOf("!"),t!==-1&&(r=i.substring(t+1,i.length),r=r==="strip",i=i.substring(0,t)),{moduleName:u,ext:i,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(n,i,r,u){var e=t.xdRegExp.exec(n),o,f,s;return e?(o=e[2],f=e[3],f=f.split(":"),s=f[1],f=f[0],(!o||o===i)&&(!f||f===r)&&(!s&&!f||s===u)):!0},finishLoad:function(n,r,f,e){f=r?t.strip(f):f;i.isBuild&&(u[n]=f);e(f)},load:function(n,u,f,e){if(e.isBuild&&!e.inlineText){f();return}i.isBuild=e.isBuild;var o=t.parseName(n),s=o.moduleName+"."+o.ext,a=u.toUrl(s),v=i.useXhr||t.useXhr;if(!r||v(a,h,c,l))t.get(a,function(i){t.finishLoad(n,o.strip,i,f)},function(n){f.error&&f.error(n)});else{
//!strip part to avoid file system issues.
u([s],function(n){t.finishLoad(o.moduleName+"."+o.ext,o.strip,n,f)})}},write:function(n,i,r){if(u.hasOwnProperty(i)){var f=t.jsEscape(u[i]);r.asModule(n+"!"+i,"define(function () { return '"+f+"';});\n")}},writeFile:function(n,i,r,u,f){var e=t.parseName(i),o=e.moduleName+"."+e.ext,s=r.toUrl(e.moduleName+"."+e.ext)+".js";t.load(o,r,function(){var i=function(n){return u(s,n)};i.asModule=function(n,t){return u.asModule(n,s,t)};t.write(n,o,i,f)},f)}},typeof process!="undefined"&&process.versions&&!!process.versions.node?(e=require.nodeRequire("fs"),t.get=function(n,t){var i=e.readFileSync(n,"utf8");i.indexOf("﻿")===0&&(i=i.substring(1));t(i)}):t.createXhr()?t.get=function(n,r,u){var f=t.createXhr();if(f.open("GET",n,!0),i.onXhr)i.onXhr(f,n);f.onreadystatechange=function(){var t,i;f.readyState===4&&(t=f.status,t>399&&t<600?(i=new Error(n+" HTTP status: "+t),i.xhr=f,u(i)):r(f.responseText))};f.send(null)}:typeof Packages!="undefined"&&(t.get=function(n,t){var e=new java.io.File(n),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(e),"utf-8")),r,i,f="";try{for(r=new java.lang.StringBuffer,i=u.readLine(),i&&i.length()&&i.charAt(0)===65279&&(i=i.substring(1)),r.append(i);(i=u.readLine())!==null;)r.append(o),r.append(i);f=String(r.toString())}finally{u.close()}t(f)}),t});define("text!AuthService/Templates/Authorization/section-token.html",[],function(){return'<div style="display:none" id="auth-content">\r\n    <div id="content-wrapper" data-areaName="{{areaName}}">\r\n        <div class="auth-header-container">\r\n            <div class="auth-header">\r\n                <span class="token-title">{{ i18n(\'authorization.step2.title\') }}<\/span><\/br>\r\n                <span class="token-id">\r\n                    ({{ i18n(\'authorization.step2.authNr\') }} {{ operationNumber }} {{ i18n(\'authorization.step2.date\') }}\r\n                    {{ operationDate }})\r\n                <\/span>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="icon">\r\n            <div class="validation-icon"><\/div>\r\n            <div class="mobile-icon"><\/div>\r\n        <\/div>\r\n        <div class="auth-fields">\r\n            <span class="information">\r\n                <span style="padding-right:18px;">{{ i18n(\'authorization.info.notificationInfo\') }} {{ deviceName }}.<\/span><br />\r\n                <span>{{i18n(\'authorization.info.stayOnInfo\')}}<\/span>\r\n            <\/span>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n\r\n<iframe src="about:blank" style="width:100%; display:none; height:0" frameborder="0" scrolling="no" id="auth-frame" class="background-info info" onload="parent.parent.loadFrame(this);" />\r\n<script>\r\n    parent.parent.initFrame();\r\n<\/script>'});define("text!AuthService/Templates/Authorization/section-token-mini.html",[],function(){return'<div style="display:none" id="auth-content">\r\n    <div class="icon icon-mini">\r\n        <div class="validation-icon"><\/div>\r\n        <div class="mobile-icon"><\/div>\r\n    <\/div>\r\n    <div id="content-wrapper-mini" data-areaName="{{areaName}}" class="information">\r\n        <span class="auth-header-span">{{ i18n(\'authorization.info.notificationInfo\') }} {{ deviceName }}.<\/span><br />\r\n        <span>\r\n            ({{ i18n(\'authorization.step2.authNr\') }} {{ operationNumber }} {{ i18n(\'authorization.step2.date\') }}\r\n            {{ operationDate }})\r\n        <\/span>\r\n    <\/div>\r\n<\/div>\r\n\r\n<iframe src="about:blank" frameborder="0" scrolling="no" id="auth-frame" class="frames background-info info"/>\r\n<script>\r\n    parent.parent.initFrame();\r\n<\/script>'});define("text!AuthService/Templates/Authorization/section-token-uw.html",[],function(){return'<div class="nam-auth-container">\r\n    <div class="flex-box-nam desktop-only">\r\n        <div class="logo-container">\r\n            <div class="phone-logo">\r\n            <\/div>\r\n        <\/div>\r\n        <div class="nam-right-container">\r\n            <p class="notification-container notification">\r\n                <span>{{ i18n(\'authorization.info.notificationInfo\') }} {{ deviceName }}.<\/span>\r\n                <span>{{i18n(\'authorization.info.stayOnInfo\')}}<\/span>\r\n            <\/p>\r\n            <p class="notification-small">\r\n                <span>{{ i18n(\'authorization.step2.title\') }}<\/span>\r\n                <span>\r\n                    ({{ i18n(\'authorization.step2.authNr\') }} {{ operationNumber }} {{ i18n(\'authorization.step2.date\') }}\r\n                    {{ operationDate }})\r\n                <\/span>\r\n            <\/p>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <div class="mobile-container mobile-only">\r\n        <div class="logo-container">\r\n            <div class="phone-logo">\r\n            <\/div>\r\n        <\/div>\r\n        <p class="notification-container notification">\r\n            <span>{{ i18n(\'authorization.info.notificationInfo\') }} {{ deviceName }}.<\/span>\r\n            <span>{{i18n(\'authorization.info.stayOnInfo\')}}<\/span>\r\n        <\/p>\r\n        <p class="notification-small">\r\n            <span>{{ i18n(\'authorization.step2.title\') }}<\/span>\r\n            <span>\r\n                ({{ i18n(\'authorization.step2.authNr\') }} {{ operationNumber }} {{ i18n(\'authorization.step2.date\') }}\r\n                {{ operationDate }})\r\n            <\/span>\r\n        <\/p>\r\n    <\/div>\r\n<\/div>'});define("text!AuthService/Templates/Authorization/section-token-mtransfer.html",[],function(){return'<div id="auth-frame" class="background-info info">\r\n    <div id="content-wrapper" data-areaName="{{areaName}}">\r\n        <div class="auth-header-container">\r\n            <div class="auth-header">\r\n                <span class="token-title">{{ i18n(\'authorization.step2.title\') }}<\/span><\/br>\r\n                <span class="token-id">\r\n                    ({{ i18n(\'authorization.step2.authNr\') }} {{ operationNumber }} {{ i18n(\'authorization.step2.date\') }}\r\n                    {{ operationDate }})\r\n                <\/span>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="right-container">\r\n            <div class="icon">\r\n                <div class="validation-icon"><\/div>\r\n                <div class="mobile-icon"><\/div>\r\n            <\/div>\r\n            <div class="auth-fields">\r\n                <span class="information">\r\n                    {% if (deviceName.lenght) { %}\r\n                        <span style="padding-right:18px;">{{ i18n(\'authorization.info.notificationInfo\') }} {{deviceName}}.<\/span><br />\r\n                    {% } else { %}\r\n                        <span style="padding-right:18px;">{{ i18n(\'authorization.info.notificationInfo\') }}.<\/span><br />\r\n                    {% } %}\r\n                    <span>{{i18n(\'authorization.info.stayOnInfo\')}}<\/span>\r\n                <\/span>\r\n            <\/div>\r\n        <\/div>\r\n\r\n    <\/div>\r\n<\/div>'});define("AuthService/Scripts/Authorization/renderers/auth-frame-renderer.js",[],function(){function n(t,i){var r,u;if(i||(i=window),r=i.document.getElementById(t),r)return r;for(u=i.frames.length-1;u>=0;u--)if(r=n(t,i.frames[u].window),r)return r}return areas={settings:"settings",authorizationsAndLimits:"authorizationsandlimits",consent:"consent",consentChecked:"consentchecked",payments:"payments",mobileMTransfer:"mobilemtransfer",cards:"cards",operations:"operations",investmentFunds:"investmentfunds",investmentFundsWhite:"investmentfundswhite",loans:"loans",logging:"logging",accessToBank:"accesstobank",insurance:"insurance",notifications:"notifications",basket:"basket",basketImport:"basketimport",addressBook:"addressbook",forex:"forex",periodicPayments:"periodicpayments",paymentsZus:"paymentszus",paymentsOneZus:"paymentsonezus",paymentsMobile:"paymentsmobile",investmentFundsMifid:"investmentfundsmifid",investmentFundsBuy:"investmentfundsbuy",investmentFundsDelete:"investmentfundsdelete",blik:"blik",securestatements:"securestatements"},init=function(t){var r;removeIframe();r=t.toLowerCase();setOuterStyles(r);var f=n("auth-content").innerHTML,u=n("auth-frame"),i=u.document;u.contentWindow&&(i=u.contentWindow.document);i.open();i.writeln(f);createLinkType("common",i);createLinkType(r,i);i.close()},removeIframe=function(){var n=window.top.frames.document.getElementsByClassName("frames");n.length>1&&n[0].parentNode.removeChild(n[0])},createLinkType=function(n,t){if(_.has(Ebre.Venezia.AuthService.Styles.Inner,n)!==!1){var i=t.createElement("link");i.type="text/css";i.rel="stylesheet";i.href=Ebre.Venezia.AuthService.Styles.Inner[n];t.head.appendChild(i)}},setOuterStyles=function(n){var i=window.top.frames.document,t=i.getElementsByClassName("auth-plugin")[0],u,r;switch(n){case areas.settings:case areas.authorizationsAndLimits:t.style.margin="0 -24px";break;case areas.mobileMTransfer:t.style.margin="0 1px";break;case areas.cards:t.style.margin="-5px -15px 0px -15px";t.style.padding="0";i.getElementsByClassName("auth-token-plugin")[0].style.width="100%";break;case areas.consent:case areas.consentChecked:t.style.margin="0 -49px";t.style.position="relative";t.style.right="20px";break;case areas.operations:t.style.margin="0 -15px";t.style.width="100%";break;case areas.investmentFunds:r=i.getElementsByClassName("auth-token-plugin")[0].style;r.width="673px";r.paddingLeft="7px";r.marginLeft="-15px";break;case areas.investmentFundsWhite:t.style.padding="0";t.style.marginTop="-35px";break;case areas.investmentFundsBuy:t.style.marginTop="-15px";break;case areas.investmentFundsDelete:r=i.getElementsByClassName("auth-token-plugin")[0].style;r.width="680px";r.marginLeft="-15px";break;case areas.logging:i.getElementsByClassName("confirm")[0].style.height="8px";t.style.marginLeft="-20px";t.style.paddingBottom="0px";break;case areas.accessToBank:$(i).find(".auth-plugin").css({marginLeft:"-20px",paddingBottom:"0px"});break;case areas.loans:i.getElementsByClassName("auth-token-plugin")[0].style.width="100%";t.style.margin="0";break;case areas.notifications:u=i.getElementById("ombframe");u&&(u.contentWindow.frames.MainFrame.document.querySelector(".authContainer .auth-token-plugin").style.margin="0 -15px");break;case areas.basket:t.style.padding="0";t.style.marginTop="-10px";break;case areas.basketImport:t.style.padding="0";i.getElementsByClassName("auth-token-plugin")[0].style.marginTop="5px";break;case areas.forex:t.style.margin="0 -15px";break;case areas.insurance:t.style.marginLeft="-20px";t.style.marginRight="-5px";i.getElementsByClassName("auth-token-plugin")[0].style.width="100%";break;case areas.periodicPayments:t.style.margin="0 -15px";break;case areas.paymentsZus:case areas.paymentsMobile:t.style.margin="-10px -15px 0 -15px";case areas.paymentsOneZus:t.style.width="100%";i.getElementsByClassName("auth-token-plugin")[0].style.paddingBottom="0px";i.getElementById("auth-frame").style.height="65px";break;case areas.investmentFundsMifid:t.style.margin="-50px 0 0 0";t.style.padding="0";r=i.getElementsByClassName("auth-token-plugin")[0].style;r.margin="0 -25px";break;case areas.securestatements:t.style.margin="0 -40px";break;case areas.blik:t.style.margin="0 -20px"}},{init:init}});define("AuthService/Scripts/Authorization/renderers/renderer.js",["text!AuthService/Templates/Authorization/section-token.html","text!AuthService/Templates/Authorization/section-token-mini.html","text!AuthService/Templates/Authorization/section-token-uw.html","text!AuthService/Templates/Authorization/section-token-mtransfer.html","AuthService/Scripts/Authorization/renderers/auth-frame-renderer.js"],function(n,t,i,r,u){function s(){if(Modernizr.mq("only all")){var n=Modernizr.mq("(max-width: 480px)");if(n)return _templates.uw}return _templates.mtransfer}function h(n){var t=$(".auth-plugin");t.find(".phone-logo").removeClass().addClass("timeout-icon");n.areaName=="mtransfer"?t.find(".notification-container").append("<\/br><span style='color:#bb1834'>"+I18n.t("authorization.errors.timeout")+"<\/span>"):(t.css("background-color","#ffffff"),t.find(".notification-container").css("color","#201c17"),t.find(".notification-container").html(I18n.t("authorization.errors.timeoutUW")))}function c(n){var i=getIFrame(n.isNmB),t=i.contents();$(i).css("background-color","#f8e7e7 !important");$(t).find(".auth-header").css("color","black");$(t).find(".information").append('<\/br><span style="font-size:10px; color: #bb1834 !important;">'+I18n.t("authorization.errors.timeout")+"<\/span>");$(t).find(".validation-icon").show();n.disabledAutoNotification&&($(t).find(".information").css("color","#000000"),$(t).find(".label").css("font-size","13px"));setHeightOnTimeout(i)}function l(n){if(n.placeholder.length==0){f=!1;return}var t=n.placeholder,i=t.before("<"+t.prop("nodeName").toLowerCase()+' class="nam-auth" style="display:none" />').parent().find(".nam-auth").addClass(t.attr("class"));n.placeholder={nam:i,original:t};t.detach();f=!0}function o(n,t){(t===undefined&&(t=!0),f)&&(t&&n.placeholder.nam.after(n.placeholder.original),n.placeholder.nam.remove(),t&&n.placeholder.original.show())}_templates={main:"default",mini:"mini",uw:"uw",mTransfer:"mtransfer"};var e=null,f=!1;return getTemplate=function(u){return u==_templates.mini?t:u==_templates.uw?i:u==_templates.mTransfer?r:n},_buildTemplate=function(n,t,i){return _.template("<"+t+' class="'+i+'">'+getTemplate(n)+"<\/"+t+">")},_convertToDisplayDate=function(n){function i(n){return n>=10?n.toString():"0"+n}if(_.isDate(n)===!1){var t=n.toString().substring(0,10).split("-");if(t.length!=3)return"";n=new Date(t[0],t[1]-1,t[2])}return i(n.getDate())+"."+i(n.getMonth()+1)+"."+n.getFullYear()},showPreloaderAndHideButtons=function(n){f&&(n.placeholder.nam.addClass("remove-prehidden"),n.placeholder.nam.html('<div class="auth-loader" style="display: block; position: relative; padding-top: 60px;"><div class="preloader-mask" style="position:absolute; background:transparent"><div class="preloader-icon"><\/div><\/div><\/div>'),n.placeholder.original.hide(),n.placeholder.nam.show(),n.buttonsContainer&&(n.buttonsContainer.hide(),$.each(n.hiddenButtons,function(){$(this).hide()})))},hidePreloaderAndShowButtons=function(n){f&&(o(n),n.placeholder.original.show(),n.buttonsContainer&&($.each(n.hiddenButtons,function(){$(this).css("display","")}),n.buttonsContainer.show()),n.placeholder.original.removeClass("validation-error").find(".validation-error").removeClass("validation-error"),n.placeholder.original.find("input[type=text]").focus())},createView=function(n){function o(n,t){if(_.has(Ebre.Venezia.AuthService.Styles.Outer,n)!==!1){t=t||"authservice-outer-style";var i=window.document.getElementById(t);i||(i=window.document.createElement("link"),i.id=t,window.document.head.appendChild(i));i.type="text/css";i.rel="stylesheet";i.href=Ebre.Venezia.AuthService.Styles.Outer[n]}}function h(){var t,u;r||(n.isNmB?t=function(){return $(".auth-token-plugin").length>0}:(u=getMainFormForOldWebPages(),t=function(){return u.find(".auth-token-plugin").length>0}),t()?i.resolve():window.setTimeout(function(){h()},100))}var t,u,i,r;if(f)return n.areaName=="mtransfer"&&(n.templateName=s()),e=n,t=n.areaName.toLowerCase(),u=_buildTemplate(n.templateName,n.tagName,"auth-token-plugin")({operationNumber:n.operationNumber,operationDate:_convertToDisplayDate(n.operationDate),deviceName:n.deviceName,areaName:t,isNmb:n.isNmB,i18n:function(){return I18n.t(_.toArray(arguments).join("."))}}),o("common","authservice-common-outer"),o(t),n.placeholder.nam.html(u),i=jQuery.Deferred(),r=!1,window.setTimeout(function(){r=!0},2e3),h(),i.promise()},disableNotification=function(n,t,i){if(n&&($("#auth-frame").removeClass("info"),$("#auth-frame").removeClass("background-info")),t){var r=getIFrame(i);$(r).contents().find(".mobile-icon").hide()}},getMainFormForOldWebPages=function(){var n=$("#ombframe").contents(),t=$(n).find("frame").get(1);return $(t).contents().find("#MainForm")},getIFrame=function(n){return n?$("#auth-frame"):getMainFormForOldWebPages().find("#auth-frame")},showTimeOutError=function(n){n.templateName==="uw"?h(n):c(n)},setHeightOnTimeout=function(n){setTimeout(function(){$(n).css({display:"block",height:$(n).contents().find("body").prop("scrollHeight")+"px"})},100)},initFrame=function(){u.init(e.areaName.toLowerCase())},loadFrame=function(n){function t(){$(n).fadeIn(500,function(){$(this).css({display:"block",height:$(this).contents().find("body").prop("scrollHeight")+"px","padding-bottom":"2px"})})}t();window.setTimeout(t,500)},{GetTemplate:getTemplate,ShowPreloaderAndHideButtons:showPreloaderAndHideButtons,HidePreloaderAndShowButtons:hidePreloaderAndShowButtons,WrapAndHideOriginalAuth:l,RemoveNam:function(n){o(n,!1)},CreateView:createView,Templates:_templates,GetMainFormForOldWebPages:getMainFormForOldWebPages,DisableNotification:disableNotification,ShowTimeOutError:showTimeOutError}});define("AuthService/Scripts/Authorization/data/authhubData.js",[],function(){"use stapp";function t(n){if(!Ebre.Venezia.AuthService.ServiceEnabled)return!1;if(Ebre.Venezia.AuthService.Urls.GetStatus==undefined)throw new Error("Missing GetStatus url.");if(Ebre.Venezia.AuthService.Urls.GetData==undefined)throw new Error("Missing GetData url.");if(n.placeholder==undefined)throw new Error("No placeholder specified.");}function i(t){return t.requireAuthorization?Ebre.Venezia.AuthService.UserUseNam?!Ebre.Venezia.AuthService||!Ebre.Venezia.AuthService.ServiceEnabled||!Ebre.Venezia.AuthService.UserUseNam?n.Invalid:n.Valid:n.UserNotUseNam:n.NoAuthorization}var n=Object.freeze({NoAuthorization:1,UserNotUseNam:2,Invalid:3,Valid:4});return{ValidateServices:i,ValidateEnvironment:t,Statuses:n}});define("AuthService/Scripts/Authorization/authService",["AuthService/Scripts/Authorization/renderers/renderer.js","AuthService/Scripts/Authorization/data/authhubData.js"],function(n,t){function b(e){function o(){l().done(function(t){if(!t.UserUseNam){Ebre.Venezia.AuthService.UserUseNam=!1;n.HidePreloaderAndShowButtons(i);r.reject();return}if(t.Pending){s?window.setTimeout(function(){o()},500):HandleServerError(t.ErrorCode);return}if(t.Status=="Outdated")return r.reject();var u=n.CreateView(i);n.DisableNotification(i.disabledAutoNotification,!1,i.isNmB);u.then(function(){d();f&&a()})}).fail(function(){r.reject("Auth PreService failed.");u()})}function h(u){var f=t.ValidateServices(i);switch(f){case t.Statuses.UserNotUseNam:if(u){l().then(function(n){Ebre.Venezia.AuthService.UserUseNam=n.UserUseNam;h(!1)},function(){n.HidePreloaderAndShowButtons(i);r.reject()});return}return n.HidePreloaderAndShowButtons(i),r.reject();case t.Statuses.Valid:i.placeholder.nam.addClass("remove-prehidden");i.buttonsContainer&&i.buttonsContainer.show();window.setTimeout(function(){s=!1},5e3);o();break;default:return n.HidePreloaderAndShowButtons(i),r.reject()}}if(r=new $.Deferred,i=_.extend({},w,rt(e)),i.errorHandlerCallback===undefined&&(i.errorHandlerCallback=function(){i.buttonsContainer.find("a, span").last().click()}),t.ValidateEnvironment(i))return r.reject(),!1;n.WrapAndHideOriginalAuth(i);n.ShowPreloaderAndHideButtons(i);var s=!0;return h(!0),r.promise()}function l(){return s({url:Ebre.Venezia.AuthService.Urls.GetData,data:JSON.stringify({sessionKey:i.sessionKey})}).done(function(n){if(!n.UserUseNam||n.Pending)return n;f=n.AuthId;i.operationNumber=n.OperationNumber;i.operationDate=n.OperationDate;i.deviceName=n.DeviceName;e.serviceCallInterval=n.AjaxStatusCheckInterval<=1?e.serviceCallInterval:n.AjaxStatusCheckInterval>100?n.AjaxStatusCheckInterval:100})}function a(){o=setTimeout(k,e.serviceCallInterval)}function k(){s({url:Ebre.Venezia.AuthService.Urls.GetStatus,data:JSON.stringify({authId:f}),beforeSend:function(){if(!$(".auth-token-plugin").length&&i.isNmB)return h(),!1;if(!i.isNmB){var t=n.GetMainFormForOldWebPages();if(t&&!$(t).find(".auth-token-plugin").length)return h(),!1}}}).done(function(n){o&&a();it(n)}).fail(function(n){g(n)})}function d(){c=setTimeout(function(){n.DisableNotification(!0,!0,i.isNmB)},1e4)}function v(n){var t=I18n.t("authorization.errors.cancelLabel");Ebre.Common.createTokenCancelMessage(t,n)}function h(){if(f){var n=f;return u(),s({url:Ebre.Venezia.AuthService.Urls.Cancel,data:JSON.stringify({authId:n})}).done(function(n){n.status=="WARNING"&&v(I18n.t("authorization.errors.cancelIB"))})}}function y(t){var t=t||{preventShowCancelMessage:!1};u();typeof i.callbackTokenCancel=="function"&&i.callbackTokenCancel(t);t.preventShowCancelMessage||window.setTimeout(function(){v(I18n.t("authorization.errors.cancel"))},1500);n.RemoveNam(i)}function u(){clearTimeout(o);o=null;clearTimeout(c);f=null}function g(t){if(u(),typeof t.responseText=="undefined"&&t.statusText!="canceled"){var f=p(t.ErrorCode);Ebre.Common.createErrorMessage("",f)}n.RemoveNam(i);r.reject()}function p(n){var t=I18n.t("authorization.errors."+n);return t.indexOf("[missing")==0?I18n.t("authorization.errors.defaultError"):t}function nt(){u();n.RemoveNam(i);r.resolve()}function tt(){u();n.ShowTimeOutError(i)}function it(n){switch(n.Status){case"Authorized":nt();break;case"Error":HandleServerError(n.ErrorCode);break;case"Canceled":y();break;case"Outdated":y({preventShowCancelMessage:!0});break;case"TimeOut":tt()}}function rt(n){for(var t in n)n[t]===!1||n[t]||delete n[t];return n}function s(n,t){t=typeof t!="undefined"?t:e.ajaxCallAllowedErrors;var i=arguments.length>2?arguments[2]:$.Deferred();return Ebre.Proxy.VeneziaPostJSON(n).done(function(n){i.resolve(n)}).fail(function(r){--t&&r.statusText!="canceled"?s(n,t,i):i.reject(r)}),i.promise()}var e={serviceCallInterval:1e3,ajaxCallAllowedErrors:3},w={operationNumber:1,operationDate:"2015-10-15T00:00:00.000",hiddenButtons:[],buttonsContainer:null,isNmB:!0,templateName:n.Templates.main,tagName:"div",deviceName:"",disabledAutoNotification:!1,requireAuthorization:!0,areaName:"payments",sessionKey:null},r=null,o=null,f=null,i={},c=null;return HandleServerError=function(n){var t=p(n);Ebre.Common.createErrorMessage("",t);typeof i.errorHandlerCallback=="function";u();r.reject()},{initialize:b,stop:u,cancel:h,stopServiceOnModify:u}});define("AuthService/Scripts/i18n/pl-PL",[],function(){"use stapp";return{pl:{authorization:{step2:{authNr:"nr",date:"z dnia",title:"Powiadomienie autoryzacyjne"},errors:{timeout:"Twoje powiadomienie autoryzacyjne wygasło.",timeoutUW:'Twoje powiadomienie autoryzacyjne wygasło. Wciśnij przycisk "Anuluj" by powrócić do aplikacji mobilnej i złóż wniosek ponownie.',cancel:"Operacja anulowana na urządzeniu mobilnym",cancelIB:"Operacja anulowana.",cancelLabel:"",ADP015:"Mobilna autoryzacja nieaktywna. <\/br> Zapisz się ponownie na pilotaż Mobilnej autoryzacji.",ADP014:"Nie możesz potwierdzać operacji. <\/br> Nie masz aktywnej Mobilnej autoryzacji w aplikacji mBanku. <\/br> Zobacz jak aktywować Mobilną autoryzację.",defaultError:"Przykro nam, usługa jest w tej chwili niedostępna. <\/br> Prosimy spróbować ponownie. <\/br> Jeśli błąd się powtórzy prosimy o kontakt z Centrum Obsługi Telefonicznej..."},info:{notificationInfo:"Powiadomienie autoryzacyjne zostało wysłane na urządzenie",stayOnInfo:" Pozostań na tej stronie i potwierdź operację w aplikacji mobilnej."}}}}});define("AuthService/Scripts/locale",["AuthService/Scripts/i18n/pl-PL"],function(n){return _.extend({},n)});define("AuthService/Scripts/setup",["AuthService/Scripts/locale"],function(n){function t(t){I18n.locale||(I18n.defaultLocale="pl",I18n.locale=t,I18n.fallbacks=!0);I18n.translations=$.extend(!0,{},I18n.translations,n)}function i(){_.templateSettings.escape=/\{\{(.+?)\}\}/g;_.templateSettings.evaluate=/\{%(.+?)%\}/g;_.templateSettings.interpolate=/\{#(.+?)#\}/g}return{setLocale:t,setTemplates:i}})